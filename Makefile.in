APP = pdfresurrect
MANPAGE = pdfresurrect.1
OBJS = main.o pdf.o
CC = @CC@
CFLAGS = @CFLAGS@ @CPPFLAGS@ $(EXTRA_CFLAGS)
LDFLAGS = @LDFLAGS@
PREFIX = @prefix@

all: $(OBJS) $(APP)

$(APP): $(OBJS)
	$(CC) -o $@ $(OBJS) $(CFLAGS) $(LDFLAGS)

%.o: %.c
	$(CC) -o $@ -c $< $(CFLAGS)

install:
	cp $(APP) $(DESTDIR)$(PREFIX)/bin/
	cp $(MANPAGE) $(DESTDIR)$(PREFIX)/man/man1/

uninstall:
	rm $(DESTDIR)$(PREFIX)/bin/$(APP)
	rm $(DESTDIR)$(PREFIX)/man/man1/$(MANPAGE)

clean:
	rm -rfv $(OBJS) $(APP)

distclean: clean
	rm -f Makefile
	rm -f config.log config.status

.PHONY: install uninstall clean distclean
